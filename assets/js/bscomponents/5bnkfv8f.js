/*! Built with http://stenciljs.com */
const{h:e}=window.bscomponents;import{f as l,n as o,h as t,i as s,p as a,t as n,s as r,r as i,q as g}from"./chunk-89dac778.js";import{a as c}from"./chunk-5259db55.js";import{c as h}from"./chunk-93432030.js";import{a as p}from"./chunk-55988a92.js";import{a as d}from"./chunk-8f426baa.js";import{a as u}from"./chunk-89796593.js";import{b as E,a as T}from"./chunk-5028a50e.js";import{a as f}from"./chunk-e1923c80.js";import"./chunk-64cf3b78.js";import"./chunk-5260d582.js";var m=function(e){e=s(e);var a=o(e)?t(e):void 0,n=a?a[0]:e.charAt(0),r=a?l(a,1).join(""):e.slice(1);return n.toUpperCase()+r};class w{constructor(){this.showEventName="show.bs.collapse",this.shownEventName="shown.bs.collapse",this.hideEventName="hide.bs.collapse",this.hiddenEventName="hidden.bs.collapse",this.ignoreAccordion=!1,this.ignoreDataToggles=!1,this.showCollapse=!1}componentWillLoad(){if(!1===this.thisCollapseIsShown()&&!0===this.showCollapse){r(this.collapseEl,"show"),i(this.collapseEl,"collapsing"),r(this.collapseEl,"collapse");const e=w.getDimension(this.collapseEl);this.collapseEl.style[e]="";const l=this.getConfig({toggle:"show"});let o;if(p(l.parent)?o=l.parent:(o=T(this.collapseEl,l.parent))||console.warn(`unable to find accordion parent by selector: "${l.parent}"`),o){const e=Array.prototype.slice.call(o.querySelectorAll(".collapse"));for(let t=0,s=e.length;t<s;t+=1)n(e[t],"show")&&E(o,e[t].dataset.parent)&&!e[t].isEqualNode(this.collapseEl)&&l.collapseElPlannedToBeClosed.push(e[t])}if(!0!==l.ignoreAccordion)for(let e=0,o=l.collapseElPlannedToBeClosed.length;e<o;e+=1){i(l.collapseElPlannedToBeClosed[e],"show"),i(l.collapseElPlannedToBeClosed[e],"collapsing"),r(l.collapseElPlannedToBeClosed[e],"collapse");const o=w.getDimension(l.collapseElPlannedToBeClosed[e]);this.collapseEl.style[o]=""}!0!==l.ignoreDataToggles&&w.handleToggleDataToggles(l)}}componentDidUnload(){this.relatedTarget=null}getConfig(e={},l=null){const o={};return o.relatedTarget=l,!0===e.toggle?o.toggle="toggle":!1===e.toggle?!0===this.thisCollapseIsShown()?o.toggle="show":o.toggle="hide":o.toggle=c(e,"toggle","toggle"),h(e,"ignoreAccordion")?o.ignoreAccordion=e.ignoreAccordion:o.ignoreAccordion=this.ignoreAccordion,h(e,"ignoreDataToggles")?o.ignoreDataToggles=e.ignoreDataToggles:o.ignoreDataToggles=this.ignoreDataToggles,o.collapseElPlannedToBeOpened=[],o.collapseElPlannedToBeClosed=[],h(e,"target")?o.targetSelector=e.target:l&&h(l.dataset,"target")&&(o.targetSelector=l.dataset.target),h(e,"parent")&&p(e.parent)?o.parent=e.parent:h(e,"parent")&&"string"==typeof e.parent&&a(e.parent)>1?o.parent=e.parent:h(this.collapseEl.dataset,"parent")&&(o.parent=this.collapseEl.dataset.parent),o}closeOtherOpenAccordions(e){for(let l=0,o=e.collapseElPlannedToBeClosed.length;l<o;l+=1)e.collapseElPlannedToBeClosed[l].collapse&&!this.collapseEl.isEqualNode(e.collapseElPlannedToBeClosed[l])?e.collapseElPlannedToBeClosed[l].collapse({toggle:"hide",ignoreAccordion:!0,ignoreDataToggles:!0}):console.error('Unable to toggle collapse for all targets due to unavailable bs-collapse method "collapse')}static handleToggleDataToggles(e){const l=Array.prototype.slice.call(document.querySelectorAll('[data-toggle="collapse"]'));for(let o=0,t=l.length;o<t;o+=1){const t=f(l[o]);let s=!1;if(a(t)>0){for(let a=0,n=e.collapseElPlannedToBeOpened.length;a<n;a+=1)!0===E(e.collapseElPlannedToBeOpened[a],t)&&!1===s&&(i(l[o],"collapsed"),l[o].setAttribute("aria-expanded","true"),s=!0);if(!1===s)for(let s=0,n=e.collapseElPlannedToBeClosed.length;s<n;s+=1)if(!0===E(e.collapseElPlannedToBeClosed[s],t)){const e=document.querySelectorAll(`${t}.show`);0===a(e)&&(r(l[o],"collapsed"),l[o].setAttribute("aria-expanded","false"))}}}}thisCollapseIsShown(){return n(this.collapseEl,"show")||n(this.collapseEl,"collapsing")}handleToggle(e){if(h(e,"parent")&&!0!==e.ignoreAccordion){let l;if(p(e.parent)?l=e.parent:(l=T(this.collapseEl,e.parent))||console.warn(`unable to find accordion parent by selector: "${e.parent}"`),l){const o=Array.prototype.slice.call(l.querySelectorAll(".collapse"));for(let t=0,s=o.length;t<s;t+=1)n(o[t],"show")&&E(l,o[t].dataset.parent)&&e.collapseElPlannedToBeClosed.push(o[t])}}return"show"===e.toggle?(e.collapseElPlannedToBeOpened.push(this.collapseEl),void this.show(this.collapseEl,e)):"hide"===e.toggle?(e.collapseElPlannedToBeClosed.push(this.collapseEl),void this.hideCollapse(this.collapseEl,e)):this.thisCollapseIsShown()?(e.collapseElPlannedToBeClosed.push(this.collapseEl),void this.hideCollapse(this.collapseEl,e)):(e.collapseElPlannedToBeOpened.push(this.collapseEl),void this.show(this.collapseEl,e))}show(e,l){if(n(e,"show")||n(e,"collapsing"))return;if(g(e,this.showEventName,{},l.relatedTarget).defaultPrevented)return;const o=w.getDimension(e),t=`scroll${m(o)}`;r(e,"collapsing"),i(e,"collapse"),!0!==l.ignoreAccordion&&this.closeOtherOpenAccordions(l),!0!==l.ignoreDataToggles&&w.handleToggleDataToggles(l);const s=d(e);setTimeout(()=>{i(e,"collapsing"),r(e,"collapse"),r(e,"show"),e.style[o]="",l.relatedTarget&&(this.relatedTarget=l.relatedTarget),g(e,this.shownEventName,{},l.relatedTarget)},s),e.style[o]=`${e[t]}px`}hideCollapse(e,l){if(!n(e,"show"))return;if(g(e,this.hideEventName,{},this.relatedTarget).defaultPrevented)return;const o=w.getDimension(e);e.style[o]=`${e.getBoundingClientRect()[o]}px`,u(e),r(e,"collapsing"),i(e,"collapse"),i(e,"show"),e.style[o]="",!0!==l.ignoreDataToggles&&w.handleToggleDataToggles(l);const t=d(e);setTimeout(()=>{i(e,"collapsing"),r(e,"collapse"),g(e,this.hiddenEventName,{},this.relatedTarget),this.relatedTarget=null},t)}static getDimension(e){return n(e,"width")?"width":"height"}handlePresentWatch(e){e?this.handleToggle(this.getConfig({toggle:"show"})):this.handleToggle(this.getConfig({toggle:"hide"}))}collapse(e,l=null){if(0===a(e))return this.collapseEl;if("toggle"===e)return this.handleToggle(this.getConfig({toggle:"toggle"},l)),!0;if("show"===e)return this.handleToggle(this.getConfig({toggle:"show"},l)),!0;if("hide"===e)return this.handleToggle(this.getConfig({toggle:"hide"},l)),!0;if("string"==typeof e)throw new Error(`No method named "${e}"`);return"object"==typeof e?(this.handleToggle(this.getConfig(e,l)),!0):null}render(){return e("slot",null)}static get is(){return"bs-collapse"}static get properties(){return{collapse:{method:!0},collapseEl:{elementRef:!0},hiddenEventName:{type:String,attr:"hidden-event-name"},hideEventName:{type:String,attr:"hide-event-name"},ignoreAccordion:{type:Boolean,attr:"ignore-accordion",mutable:!0},ignoreDataToggles:{type:Boolean,attr:"ignore-data-toggles",mutable:!0},relatedTarget:{state:!0},showCollapse:{type:Boolean,attr:"show-collapse",mutable:!0,watchCallbacks:["handlePresentWatch"]},showEventName:{type:String,attr:"show-event-name"},shownEventName:{type:String,attr:"shown-event-name"}}}static get style(){return"bs-collapse{display:block}"}}export{w as BsCollapse};