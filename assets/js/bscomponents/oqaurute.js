/*! Built with http://stenciljs.com */
const{h:t}=window.bscomponents;import{p as e,o as a,t as o,s,r as i,q as n}from"./chunk-89dac778.js";import{a as l}from"./chunk-5028a50e.js";import{a as r}from"./chunk-e1923c80.js";import"./chunk-5260d582.js";class c{constructor(){this.tabindex="0",this.activeEventName="active.bs.button",this.inactiveEventName="inactive.bs.button",this.active=!1}componentWillLoad(){if(this.activeState=this.active,this.addFocusClass=!1,"-1"===this.tabindex&&(this.tabindex=-1),"0"===this.tabindex){const t=this.bsButtonEl.querySelector("input");l(this.bsButtonEl,'[data-toggle="buttons"]')&&t&&(this.addFocusClass=!0,this.tabindex=-1)}let t;if((t="button"===this.bsButtonEl.dataset.toggle?this.bsButtonEl:this.bsButtonEl.querySelector('[data-toggle="button"]'))&&(o(t,"active")||!0!==this.activeState?o(t,"active")&&!1===this.activeState&&i(t,"active"):s(t,"active"),t.setAttribute("aria-pressed",this.activeState?"true":"false")),l(this.bsButtonEl,'[data-toggle="buttons"]')){o(this.bsButtonEl,"active")||!0!==this.activeState?o(this.bsButtonEl,"active")&&!1===this.activeState&&i(this.bsButtonEl,"active"):s(this.bsButtonEl,"active");const t=this.bsButtonEl.querySelector("input");t&&(this.activeState?(t.checked=!0,t.setAttribute("checked","checked")):(t.checked=!1,t.removeAttribute("checked")))}}handleFocusIn(t){if(!o(this.bsButtonEl,"disabled")&&("-1"===this.tabindex&&(this.tabindex=-1),this.addFocusClass)){const e=l(t.target,".btn");s(e,"focus")}}handleFocusOut(){o(this.bsButtonEl,"disabled")||this.addFocusClass&&i(this.bsButtonEl,"focus")}handleKeyDown(t){if(!o(this.bsButtonEl,"disabled")&&this.bsButtonEl.contains(t.target)){if(32===t.which){if(!this.bsButtonEl.isEqualNode(t.target)){if("button"===a(t.target.tagName)&&"collapse"!==t.target.dataset.toggle&&"modal"!==t.target.dataset.toggle)return;if("a"===a(t.target.tagName)&&"modal"!==t.target.dataset.toggle)return}return t.stopPropagation&&(t.stopPropagation(),t.preventDefault()),"collapse"===t.target.dataset.toggle?void c.handleCollapseToggle(t.target):"modal"===t.target.dataset.toggle?void c.handleModalToggle(t.target):void this.handleToggle(this.bsButtonEl)}if(13===t.which){if(!this.bsButtonEl.isEqualNode(t.target)){if("button"===a(t.target.tagName)&&"collapse"!==t.target.dataset.toggle&&"modal"!==t.target.dataset.toggle)return;if("a"===a(t.target.tagName)&&"collapse"!==t.target.dataset.toggle&&"modal"!==t.target.dataset.toggle)return}return t.stopPropagation&&(t.stopPropagation(),t.preventDefault()),"collapse"===t.target.dataset.toggle?void c.handleCollapseToggle(t.target):"modal"===t.target.dataset.toggle?void c.handleModalToggle(t.target):void this.handleToggle(this.bsButtonEl)}27===t.which&&(t.stopPropagation&&(t.stopPropagation(),t.preventDefault()),document.activeElement.blur(),this.addFocusClass&&i(this.bsButtonEl,"focus"))}}handleButtonClick(t){if(o(this.bsButtonEl,"disabled"))return;"a"===a(t.target.tagName)&&t.stopPropagation&&(t.stopPropagation(),t.preventDefault());const e=l(t.target,'[data-toggle="collapse"]');e&&this.bsButtonEl.contains(e)&&c.handleCollapseToggle(e);const s=l(t.target,'[data-toggle="modal"]');s&&this.bsButtonEl.contains(s)&&c.handleModalToggle(s);const i=l(t.target,'[data-toggle="tab"]');i&&this.bsButtonEl.contains(i)&&this.handleTabToggle(i);const n=l(t.target,'[data-toggle="pill"]');n&&this.bsButtonEl.contains(n)&&this.handleTabToggle(n);const r=l(t.target,'[data-toggle="list"]');r&&this.bsButtonEl.contains(r)&&this.handleTabToggle(r),this.handleToggle(t.target)}static handleCollapseToggle(t){const e=r(t);if(e){const a=[],o=Array.prototype.slice.call(document.querySelectorAll(e));for(let e=0,s=o.length;e<s;e+=1)o[e].collapse?(o[e].collapse("toggle",t),o[e].dataset.parent&&a.push(o[e].dataset.parent)):console.error('Unable to toggle collapse for all targets due to unavailable bs-collapse method "collapse');const s=function(t){const e=[],a=[];for(let o=0,s=t.length;o<s;o+=1)-1===e.indexOf(t[o])?e.push(t[o]):-1===a.indexOf(t[o])&&a.push(t[o]);return a}(a);for(let t=0,e=s.length;t<e;t+=1)console.warn(`Found multiple instances for selector ${s[t]}\n                      You are trying to toggle multiple collapses that have the same parent accordion (${s[t]}).\n                      Normally only one item in an accordion is toggled at one time.`)}}static handleModalToggle(t){const e=r(t);if(e)try{const a=document.querySelector(e);a.modal&&a.modal("toggle",t)}catch(t){console.log("bs-button modal toggle target must be a valid css selector string"),console.error(t.message)}}handleTabToggle(t){const e=this.getTabToggler(t);if(!e)throw new Error('tab method can only be run on a bs-button that contains [data-toggle="tab"], [data-toggle="pill"], or data-toggle="list"');const a=r(e);if(!a)throw new Error(`invalid tab selector: "${a}"`);try{const t=document.querySelector(a);if(!t)throw new Error(`unable to find tab target selector "${a}"`);t.tab&&t.tab("show",e)}catch(t){console.log("bs-button modal toggle target must be a valid css selector string"),console.error(t.message)}}handleToggle(t){if(o(this.bsButtonEl,"disabled"))return;if(!t||!this.bsButtonEl.contains(t))throw new Error("Invalid element unable to toggle");let e=!0,a=!0;const r=l(t,'[data-toggle="buttons"]');if(r){const t=this.bsButtonEl.querySelector("input");if(t){if("radio"===t.type)if(t.checked&&this.activeState)e=!1;else{const t=r.querySelector(".active");t&&(i(t,"active"),n(t,this.inactiveEventName,{},this.bsButtonEl),t.removeAttribute("active"))}e&&(this.activeState?(t.checked=!1,t.removeAttribute("checked")):(t.checked=!0,t.setAttribute("checked","checked")),n(t,"change")),this.addFocusClass&&t.focus(),a=!1}if(e){const t=!0===this.activeState?this.inactiveEventName:this.activeEventName;if(n(this.bsButtonEl,t,{active:!this.activeState}).defaultPrevented)return;this.activeState=!this.activeState,o(this.bsButtonEl,"active")||!0!==this.activeState?o(this.bsButtonEl,"active")&&!1===this.activeState&&i(this.bsButtonEl,"active"):s(this.bsButtonEl,"active")}return void(a&&this.bsButtonEl.setAttribute("aria-pressed",this.activeState?"true":"false"))}const c=l(t,'[data-toggle="button"]');if(this.bsButtonEl.contains(c)&&c){const t=!0===this.activeState?this.inactiveEventName:this.activeEventName;if(n(c,t).defaultPrevented)return;this.activeState=!this.activeState,c.setAttribute("aria-pressed",this.activeState?"true":"false"),o(c,"active")||!0!==this.activeState?o(c,"active")&&!1===this.activeState&&i(c,"active"):s(c,"active")}}handleActiveWatch(t){if(!0!==t&&!0!==this.activeState)return;if(!0===t&&!0===this.activeState)return;if(l(this.bsButtonEl,'[data-toggle="buttons"]')){if(!0===t)return void this.handleToggle(this.bsButtonEl);this.activeState=!1,n(this.bsButtonEl,this.inactiveEventName),i(this.bsButtonEl,"active");const e=this.bsButtonEl.querySelector("input");return void(e&&(this.activeState?(e.checked=!0,e.setAttribute("checked","checked")):(e.checked=!1,e.removeAttribute("checked"))))}let e;(e="button"===this.bsButtonEl.dataset.toggle?this.bsButtonEl:this.bsButtonEl.querySelector('[data-toggle="button"]'))&&this.handleToggle(e)}dropdown(t={}){if("dropdown"!==this.bsButtonEl.dataset.toggle)throw new Error('dropdown method can only be run on a bs-button with [data-toggle="dropdown"]');const e=l(this.bsButtonEl,"bs-dropdown");if(!e)throw new Error("unable to find parent bs-dropdown component");return"get-show"===t?e.show:"get-config"===t?e.config:"get-defaults"===t?e.defaults:e.dropdown(t,this.bsButtonEl)}getTabToggler(t){if("tab"===t.dataset.toggle||"pill"===t.dataset.toggle||"list"===t.dataset.toggle)return t;const e=this.bsButtonEl.querySelector('[data-toggle="tab"]');if(e)return e;const a=this.bsButtonEl.querySelector('[data-toggle="pill"]');return a||(this.bsButtonEl.querySelector('[data-toggle="list"]')||null)}tab(t={}){const e=this.getTabToggler(this.bsButtonEl);if(!e)throw new Error('tab method can only be run on a bs-button that contains [data-toggle="tab"], [data-toggle="pill"], or data-toggle="list"');const a=r(e);if(!a)throw new Error(`invalid tab selector: "${a}"`);try{const o=document.querySelector(a);if(!o)throw new Error(`unable to find tab target selector "${a}"`);if(o.tab)return o.tab(t,e)}catch(t){console.log("bs-button modal toggle target must be a valid css selector string"),console.error(t.message)}return null}button(t={}){if(0===e(t))return this.bsButtonEl;if("toggle"===t)return this.handleToggle(this.bsButtonEl),!0;if("string"==typeof t)throw new Error(`No method named "${t}"`);return null}render(){return t("slot",null)}static get is(){return"bs-button"}static get properties(){return{active:{type:Boolean,attr:"active",mutable:!0,watchCallbacks:["handleActiveWatch"]},activeEventName:{type:String,attr:"active-event-name"},activeState:{state:!0},addFocusClass:{state:!0},bsButtonEl:{elementRef:!0},button:{method:!0},dropdown:{method:!0},inactiveEventName:{type:String,attr:"inactive-event-name"},tab:{method:!0},tabindex:{type:"Any",attr:"tabindex",reflectToAttr:!0,mutable:!0}}}static get listeners(){return[{name:"focusin",method:"handleFocusIn"},{name:"focusout",method:"handleFocusOut"},{name:"keydown",method:"handleKeyDown"},{name:"click",method:"handleButtonClick"}]}}export{c as BsButton};